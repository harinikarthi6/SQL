ticket_booking_system....

CREATE TABLE TEAMS
(
ID NUMBER(5) CHECK(ID>0) PRIMARY KEY,
NAME VARCHAR(50) UNIQUE NOT NULL,
CREATED_ID TIMESTAMP,
UPDATED_ID TIMESTAMP,
ACTIVE_USER_COUNT NUMBER(10) NOT NULL,
PREFERENCES CHAR(5),
EMAIL_DOMAIN VARCHAR(50) NOT NULL UNIQUE
);



CREATE TABLE USERS
(
ID NUMBER(5) CHECK(ID>0) PRIMARY KEY,
FIRST_NAME VARCHAR(50) NOT NULL,
LAST_NAME VARCHAR(50) NOT NULL,
EMAIL VARCHAR(50) UNIQUE NOT NULL,
CREATED_AT TIMESTAMP,
UPDATED_ID TIMESTAMP,
TEAM_ID NUMBER(5) NOT NULL,
VERSION_NUMBER VARCHAR(20) UNIQUE NOT NULL,
FOREIGN KEY (TEAM_ID) REFERENCES TEAMS(ID)
);

CREATE TABLE tickets 
(
    id NUMBER(5) PRIMARY KEY,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    user_id NUMBER(5),
    sender_name VARCHAR2(255),
    email VARCHAR2(255),
    initial_message VARCHAR2(255),
    status VARCHAR2(50),
    channel VARCHAR2(50),
    team_name VARCHAR2(255),
    agent_id NUMBER(5),
    agent_name VARCHAR2(255),
    closed_by_id NUMBER(5),
    closed_by_name VARCHAR2(255),
    team_id NUMBER(5),
    seconds_to_first_reply NUMBER(15),
    seconds_to_last_close NUMBER(15),
    num_messages VARCHAR(200),
    num_escalations NUMBER(30),
    num_reopens NUMBER(30),
    csat_rating NUMBER(30),
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (team_id) REFERENCES teams(id)
);

CREATE TABLE NPS_RESPONSES 
(
    ID NUMBER(5) PRIMARY KEY,
    CREATED_AT TIMESTAMP,
    USER_ID NUMBER(5),
    MONTHLY_SUBCRIPTION_AMT NUMBER(10,2),
    MONTHS_SUBSCRIBED NUMBER(5),
    NPS_RESPONSE NUMBER(5),
    NPS_STATUS VARCHAR2(50),
    FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);


CREATE TABLE EVENTS (
    ID RAW(16) PRIMARY KEY,
    TIME TIMESTAMP,
    USER_ID NUMBER(5),
    DISTINCT_ID VARCHAR2(255),
    NAME VARCHAR2(255),
    UTM_SOURCE VARCHAR2(255),
    UTM_MEDIUM VARCHAR2(255),
    TEAM_ID NUMBER(5),
    FOREIGN KEY (USER_ID) REFERENCES USERS(ID),
    FOREIGN KEY (TEAM_ID) REFERENCES TEAMS(ID)
);
